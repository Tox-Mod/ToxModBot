<!DOCTYPE html>
<html lang="en">
    <!-- INLUCDE THE HEADER IN THE PAGE.-->
    <head>
      <link rel="stylesheet" href="/styling/main/custom-style.css">
    </head>
    <%- include(headerPath, {
      bot, user, path,
      description: `${bio}`,
      description2: `${bio}`,
      title: `Tox Mod | ${cachedUser.username}`,
      main_title: `Tox Mod | ${cachedUser.username}`,
      image: cachedUser.avatarURL({ dynamic: true }),
      }) 
    %>
    <!-- START THE ACTUAL PAGE BODY.. YEET. -->
    <body>

    <!-- INCLUDE THE NAVBAR IN THE PAGE. -->
    <div class="bigthingy row">
      <div class="seeme col-md-8 offset-md-2 row">
        <div class="seeme col-sm-2 sinfo">
          <p id="bigytxt" class="bigyimg"><img src="https://toxmod.xyz/images/5D72D446-8F49-43B2-8924-A2E1CA45AC01.gif" style="width:88px; border-radius:50%;"/></p>
        </div>
        <div class="seeme col-sm-10 sinfo">
          <p id="bigytxt"><span style="font-size:25px; font-weight:bold;">Tox Mod</span><br /><span class="typed"></span></p>
        </div>
      </div>
      </div>
      <br />

    <%- include(navbarPath, { bot, user, path }) %>

    <div class="container">
      <br><br>
    <div class="column">
        <div class="columns is-multiline is-desktop is-variable is-7 pt-5">
          <div class="col-md-6 col-lg-4 pb-3">
            <div class="card ibl-card-custom bg-ibl border-white border-0" style="width: 70rem; height: auto">
              <div class="ibl-card-custom-img" style="background-image: url(<%= user.banner || "https://i.hizliresim.com/2sdunq.png" %>);"></div>
              <div class="ibl-card-custom-avatar">
                <img draggable="false" class="pulse-avatar-<%=user.presence.status%>"  onerror=" imgerror(this);"="" src="<%= cachedUser.avatarURL({dynamic: true}) %>" style="border-radius: 50%;">
              </div>
              <div class="card-body">
                <h4 translate="no" class="card-title">
                  <%= cachedUser.username %><span class="is-size-4" style="opacity: 0.7;">#<%= cachedUser.discriminator %></span>&nbsp;<i class="status-circle fad fa-circle status-<%=cachedUser.presence.status%>"></i>
                </h4>
                <hr style="background-color: white;">
                <p><strong>About: </strong><%= bio %></p>
                <hr style="background-color: white;">
                <p>
                  <strong>Badges:</strong>
                  <div class="user-badges">
                    <% if(cachedUser.flags) {%>
                    <% cachedUser.flags.toArray().forEach(flag =>{
                    if (flag === "HOUSE_BALANCE") { %>
                    <span data-tooltip="Hypesquad Balance" data-tooltip-location="top"><img draggable="false" src="https://discord.com/assets/9fdc63ef8a3cc1617c7586286c34e4f1.svg" data-tooltip="Hypesquad Balance" data-tippy-content="Hypesquad Balance" width="32px"></span>
                    <% } if (flag === "HOUSE_BRILLIANCE") { %>
                    <span data-tooltip="Hypesquad Brilliance"data-tooltip-location="top"><img draggable="false" src="https://ptb.discord.com/assets/48cf0556d93901c8cb16317be2436523.svg" data-tippy-content="HypeSquad Brilliance" width="32px"></span>
                    <% } if (flag === "HOUSE_BRAVERY") { %>
                    <span data-tooltip="Hypesquad Bravery"data-tooltip-location="top"><img draggable="false" src="https://canary.discord.com/assets/64ae1208b6aefc0a0c3681e6be36f0ff.svg" data-tippy-content="HypeSquad Bravery" width="32px"></span>
                    <% } if (flag === "VERIFIED_DEVELOPER") { %>
                    <span data-tooltip="Verified Developer"data-tooltip-location="top"><img draggable="false" src="https://discord.com/assets/45cd06af582dcd3c6b79370b4e3630de.svg" data-tippy-content="Early Verified Developer" width="32px"></span>
                    <% } if (flag === "EARLY_SUPPORTER") { %>
                    <span data-tooltip="Early Supporter" data-tooltip-location="top"><img draggable="false" src="https://discord.com/assets/23e59d799436a73c024819f84ea0b627.svg" data-tippy-content="Early Supporter" width="32px"></span>
                    <% } }) %>
                    <% } %> 
                    </div>       
                </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <br />
        <h4 translate="no" class="card-title">
          <center><p class="has-text-white title is-large"><i class="fa fa-gavel"></i>&nbsp;Global Infractions</p></center>
        </h4>

          <% if(cases.length === 0){ %>
            <img src="https://cdn1.iconfinder.com/data/icons/hawcons/32/698627-icon-111-search-256.png" style="width: 70px;">
            <p style="font-size: 20px;">This user is 100% Safe.. For now!</p><br>
                
              <% }else{ %>
              
              <% for (i = 0; i < cases.length; i++) { %>
                <% bot.users.fetch(cases[i].userID) %>
              <% } %>
  
              <% for (i = 0; i < cases.length; i++) { %>
                <% let reason = ''; %>
                <% let time = ''; %>
                <% let member = ''; %>
                <% let moderator = ""; %>
                <% let server = ""; %>
  
              <% if(bot.guilds.cache.get(cases[i].serverID)){ %>
                <% server = bot.guilds.cache.get(cases[i].serverID).name %>
              <% }else{ %>
                <% server = "Can't get the guild!" %>
              <% } %>
  
              <% if(cases[i].reason == ''){ %>
                <% reason = 'No reason Provided' %>
                <% }else{ %>
                <% reason = cases[i].reason %>
              <% } %>
  
              <% if(cases[i].time == undefined){ %>
                <% time = 'No time' %> 
                <% }else{ %>
                <% time = cases[i].time %>
              <% } %>
  
              <% if(bot.users.cache.get(cases[i].Moderator)){ %>
                <% moderator = bot.users.cache.get(cases[i].Moderator).tag %>
              <% }else{ %>
                <% moderator = "Wasn't defined at this time" %>
              <% } %>
  
              <% if(bot.users.cache.get(cases[i].userID)){ %>
                <% member = bot.users.cache.get(cases[i].userID).tag %>
              <% }else{ %>
                <% member = "Error occured" %>
              <% } %>
              <div class="cus_card bug">
                <p><strong style="color: rgb(255, 255, 255); font-size: 30px;">
                  Case number </strong>#<%= cases[i].case %>
                  <br>_____________<br>
                  <code>Action:</code> 
                  <strong><%= cases[i].action %></strong>
                  <br>
                  <code>Allegation:</code> <strong><%= member %></strong>
                  <br>
                  <code>Moderator: </code><strong><%= moderator %></strong>
                  <br>
                  <code>Time: </code><strong><%= time %></strong>
                  <br>
                  <code>Server: </code><strong><%= server %></strong>
                  <br>
                  <code style="font-size: 20px; color: gray;">_____________<br></code>
                  <code>Reason: </code><strong><%= reason %></strong></code></p>
              </div>
         <% } %>
      <% } %>
  </div>
</body>

 <br><br><br><br><br><br>

    <!-- INCLUDE THE WEBSITE FOOTER -->
    <%- include(footerPath, { bot, user, path }) %>
</html>